let counter = 0;

$(document)
    .ajaxSend(function (event, xhr, options) {
        counter++;

        if (getParamFromUrl("noBlockUI", options.url) === "true") {return;}

        //set loading and block ui
        if (counter > 0) {
            $('#loading').show();
        }
    })
    .ajaxComplete(function (event, xhr, options) {
        counter--;
        // unset loading and block ui
        if (counter <= 0) {
            $('#loading').hide();
        }
    });